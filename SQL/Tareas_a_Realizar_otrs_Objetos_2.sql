/*Ejercicio_1:*/
/*Crear la tabla CENTROS siguiendo el modelo de la figura, teniendo en cuenta que 
el modelo físico se va a implementar en un SGBD Oracle 12c y que la columna id 
debe ser auto-incremental (=AS IDENTITY). Los valores de la columna id serán siempre 
generados por el SGBD Oracle.
NOTA: Recuerda * delante del nombre de una columna indica que es obligatorio que 
tenga valor.*/

CREATE TABLE CENTROS (
ID NUMBER(2) GENERATED ALWAYS AS IDENTITY MAXVALUE 99,
NOMBRE VARCHAR2(30) NOT NULL,
CALLE VARCHAR2(30),
NUMERO NUMBER(2),
CP VARCHAR2(5),
CIUDAD VARCHAR2(15),
PROVINCIA VARCHAR2(40),
TELEFONO VARCHAR2(9),
CONSTRAINT CENTROS_ID_PK PRIMARY KEY (id)
);
/*Table CENTROS creado.*/

desc centros;
/*
Nombre    ¿Nulo?   Tipo         
--------- -------- ------------ 
ID        NOT NULL NUMBER(2)    
NOMBRE    NOT NULL VARCHAR2(30) 
CALLE              VARCHAR2(30) 
NUMERO             NUMBER(2)    
CP                 VARCHAR2(5)  
CIUDAD             VARCHAR2(15) 
PROVINCIA          VARCHAR2(40) 
TELEFONO           VARCHAR2(9)
*/

SELECT a.constraint_name, a.constraint_type, a.search_condition, b.*
FROM user_constraints a, user_cons_columns b
WHERE a.constraint_name = b.constraint_name
AND UPPER(a.table_name) = 'CENTROS';
/*
CONSTRAINT_NAME                                                                                                                  C SEARCH_CONDITION                                                                 OWNER                                                                                                                            CONSTRAINT_NAME                                                                                                                  TABLE_NAME
-------------------------------------------------------------------------------------------------------------------------------- - -------------------------------------------------------------------------------- -------------------------------------------------------------------------------------------------------------------------------- -------------------------------------------------------------------------------------------------------------------------------- --------------------------------------------------------------------------------------------------------------------------------
COLUMN_NAME
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  POSITION
----------

CENTROS_ID_PK                                                                                                                    P                                                                                  DAW25                                                                                                                            CENTROS_ID_PK                                                                                                                    CENTROS                                                                                                                          
ID                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
         1

*/

SELECT a.table_name, a.data_default, a.identity_column, 
        b.generation_type, b.identity_options
FROM user_tab_columns a, user_tab_identity_cols b
WHERE lower(a.table_name) = 'centros'
AND a.table_name = b.table_name
ANd a.column_name = b.column_name;
/*
TABLE_NAME                                                                                                                       DATA_DEFAULT                                                                     IDE GENERATION IDENTITY_OPTIONS                                                                                                                                                                                                                                                                                          
-------------------------------------------------------------------------------------------------------------------------------- -------------------------------------------------------------------------------- --- ---------- ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
CENTROS                                                                                                                          "DAW25"."ISEQ$$_449658".nextval                                                  YES ALWAYS     START WITH: 1, INCREMENT BY: 1, MAX_VALUE: 99, MIN_VALUE: 1, CYCLE_FLAG: N, CACHE_SIZE: 20, ORDER_FLAG: N                                                                                                                                                                                                
*/
------------------------------------------------------------------------------------

/*Ejercicio_2:*/
/*Realiza la inserción de un centro. Inventa los datos.*/

INSERT INTO CENTROS(nombre, calle, numero, cp, ciudad, provincia, telefono) 
         VALUES('JAVI', 'QUINTO COLON',21, 01034, 'BURGOS','MIRANDA',657388664);
         
SELECT * FROM CENTROS;
/*
        ID NOMBRE                         CALLE                              NUMERO CP    CIUDAD          PROVINCIA                                TELEFONO 
---------- ------------------------------ ------------------------------ ---------- ----- --------------- ---------------------------------------- ---------
         1 JAVI                           QUINTO COLON                           21 1034  BURGOS          MIRANDA                                  657388664
*/

INSERT INTO CENTROS(nombre) VALUES ('JUAN');
SELECT * FROM CENTROS;
/*
        ID NOMBRE                         CALLE                              NUMERO CP    CIUDAD          PROVINCIA                                TELEFONO 
---------- ------------------------------ ------------------------------ ---------- ----- --------------- ---------------------------------------- ---------
        21 JUAN                                                                                                                                             
         1 JAVI                           QUINTO COLON                           21 1034  BURGOS          MIRANDA                                  657388664
*/

-------------------------------------------------------------------------------------

/*Ejercicio_3:*/
/*Crea una tabla, que tenga la misma estructura y datos que la tabla DEPART, 
denominada DEPARTSEQ.
NOTA: Recuerda que las restricciones no se crean.*/

CREATE TABLE DEPARTSEQ
AS (SELECT * FROM DEPART);
/*
Table DEPARTSEQ creado.
*/
SELECT a.table_name, a.constraint_name, a.constraint_type, a.search_condition,
        b.column_name
FROM user_constraints a, user_cons_columns b
WHERE a.constraint_name = b.constraint_name
AND UPPER(a.table_name) IN ('DEPART','DEPARTSEQ')
ORDER BY a.table_name;
/*
TABLE_NAME                                                                                                                       CONSTRAINT_NAME                                                                                                                  C SEARCH_CONDITION                                                                 COLUMN_NAME                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
-------------------------------------------------------------------------------------------------------------------------------- -------------------------------------------------------------------------------------------------------------------------------- - -------------------------------------------------------------------------------- ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
DEPART                                                                                                                           DEP_PK                                                                                                                           P                                                                                  DEPT_NO                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
*/

ALTER TABLE DEPARTSEQ
ADD CONSTRAINT DEPS_DEPTNO_PK PRIMARY KEY(DEPT_NO);
/*Table DEPARTSEQ alterado.*/

SELECT a.table_name, a.constraint_name, a.constraint_type, a.search_condition,
        b.column_name
FROM user_constraints a, user_cons_columns b
WHERE a.constraint_name = b.constraint_name
AND UPPER(a.table_name) IN ('DEPART','DEPARTSEQ')
ORDER BY a.table_name;
/*
TABLE_NAME                                                                                                                       CONSTRAINT_NAME                                                                                                                  C SEARCH_CONDITION                                                                 COLUMN_NAME                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
-------------------------------------------------------------------------------------------------------------------------------- -------------------------------------------------------------------------------------------------------------------------------- - -------------------------------------------------------------------------------- ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
DEPART                                                                                                                           DEP_PK                                                                                                                           P                                                                                  DEPT_NO                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
DEPARTSEQ                                                                                                                        DEPS_DEPTNO_PK                                                                                                                   P                                                                                  DEPT_NO                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
*/

SELECT *
FROM user_tab_columns
WHERE UPPER(table_name) IN ('DEPART','DEPARTSEQ')
ORDER BY TABLE_NAME;
/*
TABLE_NAME                                                                                                                       COLUMN_NAME                                                                                                                      DATA_TYPE                                                                                                                        DAT DATA_TYPE_OWNER                                                                                                                  DATA_LENGTH DATA_PRECISION DATA_SCALE N  COLUMN_ID DEFAULT_LENGTH DATA_DEFAULT                                                                     NUM_DISTINCT LOW_VALUE                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        HIGH_VALUE                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          DENSITY  NUM_NULLS NUM_BUCKETS LAST_ANA SAMPLE_SIZE CHARACTER_SET_NAME                           CHAR_COL_DECL_LENGTH GLO USE AVG_COL_LEN CHAR_LENGTH C V80 DAT HISTOGRAM       DEF IDE EVALUATION_EDITION                                                                                                               UNUSABLE_BEFORE                                                                                                                  UNUSABLE_BEGINNING                                                                                                              
-------------------------------------------------------------------------------------------------------------------------------- -------------------------------------------------------------------------------------------------------------------------------- -------------------------------------------------------------------------------------------------------------------------------- --- -------------------------------------------------------------------------------------------------------------------------------- ----------- -------------- ---------- - ---------- -------------- -------------------------------------------------------------------------------- ------------ -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------- ---------- ----------- -------- ----------- -------------------------------------------- -------------------- --- --- ----------- ----------- - --- --- --------------- --- --- -------------------------------------------------------------------------------------------------------------------------------- -------------------------------------------------------------------------------------------------------------------------------- --------------------------------------------------------------------------------------------------------------------------------
DEPART                                                                                                                           DEPT_NO                                                                                                                          NUMBER                                                                                                                                                                                                                                                                         22              2          0 N          1                                                                                                            4 C10B                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             C129                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             ,25                 0           1 27/01/22           4                                                                   YES NO            3           0   NO  YES NONE            NO  NO                                                                                                                                                                                                                                                                                                                                                                                                    
DEPART                                                                                                                           DNOMBRE                                                                                                                          VARCHAR2                                                                                                                                                                                                                                                                       14                           Y          2                                                                                                            4 434F4E544142494C49444144                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         56454E544153                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     ,25                 0           1 27/01/22           4 CHAR_CS                                                        14 YES NO           12          14 B NO  YES NONE            NO  NO                                                                                                                                                                                                                                                                                                                                                                                                    
DEPART                                                                                                                           LOC                                                                                                                              VARCHAR2                                                                                                                                                                                                                                                                       14                           Y          3                                                                                                            4 42415243454C4F4E41                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               534556494C4C41                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   ,25                 0           1 27/01/22           4 CHAR_CS                                                        14 YES NO            8          14 B NO  YES NONE            NO  NO                                                                                                                                                                                                                                                                                                                                                                                                    
DEPARTSEQ                                                                                                                        DEPT_NO                                                                                                                          NUMBER                                                                                                                                                                                                                                                                         22              2          0 N          1                                                                                                            4 C10B                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             C129                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             ,25                 0           1 07/02/22           4                                                                   YES NO            3           0   NO  YES NONE            NO  NO                                                                                                                                                                                                                                                                                                                                                                                                    
DEPARTSEQ                                                                                                                        DNOMBRE                                                                                                                          VARCHAR2                                                                                                                                                                                                                                                                       14                           Y          2                                                                                                            4 434F4E544142494C49444144                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         56454E544153                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     ,25                 0           1 07/02/22           4 CHAR_CS                                                        14 YES NO           12          14 B NO  YES NONE            NO  NO                                                                                                                                                                                                                                                                                                                                                                                                    
DEPARTSEQ                                                                                                                        LOC                                                                                                                              VARCHAR2                                                                                                                                                                                                                                                                       14                           Y          3                                                                                                            4 42415243454C4F4E41                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               534556494C4C41                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   ,25                 0           1 07/02/22           4 CHAR_CS                                                        14 YES NO            8          14 B NO  YES NONE            NO  NO                                                                                                                                                                                                                                                                                                                                                                                                    
*/

--------------------------------------------------------------------------------------

/*Ejercicio_4:*/
/*Las columnas auto-incrementales no se pueden usar con versiones del SGBD 
anteriores a la 12c, para simular ese comportamiento se utilizaban las SECUENCIAS. 
El uso de secuencias continua siendo válido en Oracle 12c.
Crea una secuencia para utilizarla con la columna de clave primaria de la tabla 
DEPARTSEQ. La secuencia debe comenzar en 200 y tener un valor máximo de 1000. Haz 
que la secuencia aumente en diez números cada vez. Asigna a la secuencia el nombre 
DEPT_ID_SEQ. Comprueba en el diccionario de datos que el objeto se ha creado 
correctamente utilizando la vista del diccionario user_sequences.
Fijate en el tamaño de la columna que es clave primaria en la tabla DEPARTSEQ. 
Con esa longitud no es posible usar la secuencia. Modifica el tamaño de la columna 
dept_no para que sea numérica de 4 posiciones.*/

CREATE SEQUENCE DEPT_ID_SEQ
INCREMENT BY 10
START WITH 200
MAXVALUE 1000;
/*
Sequence DEPT_ID_SEQ creado.
*/

SELECT *
FROM user_sequences
WHERE upper(sequence_name) = 'DEPT_ID_SEQ';
/*
SEQUENCE_NAME                                                                                                                     MIN_VALUE  MAX_VALUE INCREMENT_BY C O CACHE_SIZE LAST_NUMBER PARTITION_COUNT S K
-------------------------------------------------------------------------------------------------------------------------------- ---------- ---------- ------------ - - ---------- ----------- --------------- - -
DEPT_ID_SEQ                                                                                                                               1       1000           10 N N         20         200                 N N
*/

ALTER TABLE DEPARTSEQ
MODIFY DEPT_NO NUMBER(4);

DESC departseq;
/*
Nombre  ¿Nulo?   Tipo         
------- -------- ------------ 
DEPT_NO NOT NULL NUMBER(4)    
DNOMBRE          VARCHAR2(14) 
LOC              VARCHAR2(14)
*/

--------------------------------------------------------------------------------------

/*Ejercicio_5:*/
/*Consulta en el diccionario de datos acerca de tus secuencias. Obtén la siguiente 
información: nombre de secuencia, valor máximo, tamaño de aumento y último número.*/

SELECT sequence_name, max_value, increment_by, last_number
FROM user_sequences;
/*
SEQUENCE_NAME                                                                                                                     MAX_VALUE INCREMENT_BY LAST_NUMBER
-------------------------------------------------------------------------------------------------------------------------------- ---------- ------------ -----------
DEPT_ID_SEQ                                                                                                                            1000           10         400
ISEQ$$_449658                                                                                                                            99            1          41
*/

--------------------------------------------------------------------------------------

/*Ejercicio_6:*/
/*Ejecuta la siguiente sentencia y comenta el resultado:
SELECT dept_id_seq.CURRVAL FROM DUAL;*/

SELECT dept_id_seq.CURRVAL
FROM DUAL;

--hacer un NEXTVAL antes

SELECT dept_id_seq.NEXTVAL
FROM DUAL;
/*
  NEXTVAL
----------
       200
*/

SELECT dept_id_seq.CURRVAL
FROM DUAL;
/*
   NEXTVAL
----------
       200
*/

--------------------------------------------------------------------------------------

/*Ejercicio_7:*/
/*Escribe un archivo de comandos llamado datos_deparseq.sql para insertar dos 
filas en la tabla DEPARTASEQ. En el script aparecerán las inserciones de dos 
departamentos llamados Educacion y Administracion.
Asegúrate de utilizar la secuencia que creaste anteriormente para dar valor a la 
columna que es clave primaria.
Ejecuta el script. Confirma las inserciones.*/

--Del archivo dato_deparseq.sql:
/*
INSERT INTO departseq(dept_no, dnombre)
    VALUES(dept_id_seq.NEXTVAL, 'EDUCACION');
    
INSERT INTO departseq(dept_no, dnombre)
    VALUES(dept_id_seq.NEXTVAL, 'ADMINISTRACION');
    
SELECT * 
FROM DEPARTSEQ
WHERE UPPER(dnombre) IN ('EDUCACION','ADMINISTRACION');
/*
   DEPT_NO DNOMBRE        LOC           
---------- -------------- --------------
       210 EDUCACION                    
       220 ADMINISTRACION               
       240 EDUCACION                    
       250 ADMINISTRACION    
*/
/*
SELECT dept_id_seq.NEXTVAL FROM DUAL;
/*
   NEXTVAL
----------
       260
*/
/*
INSERT INTO departseq(dept_no, dnombre)
    VALUES(dept_id_seq.CURRVAL, 'PROGRAMACION');
    
SELECT *
FROM DEPARTSEQ
WHERE UPPER(dnombre) = 'PROGRAMACION';
/*
   DEPT_NO DNOMBRE        LOC           
---------- -------------- --------------
       260 PROGRAMACION                 

*/


--------------------------------------------------------------------------------------

/*Ejercicio_8:*/
/*Comprueba cual será el siguiente número de departamento, que dará la secuencia 
que has creado, al realizar la siguiente inserción.*/

SELECT DEPT_ID_SEQ.CURRVAL FROM DUAL;
/*
   CURRVAL
----------
       260
*/